<phone:PhoneApplicationPage
    x:Class="SimpleTasks.Views.EditTaskPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:controls="clr-namespace:SimpleTasks.Controls"
    xmlns:tiles="clr-namespace:SimpleTasks.Tiles"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="PortraitOrLandscape" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True"
    shell:SystemTray.BackgroundColor="{StaticResource PhoneChromeColor}"
    toolkit:TiltEffect.IsTiltEnabled="True"
    BackKeyPress="PhoneApplicationPage_BackKeyPress">

    <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:SlideTransition Mode="SlideDownFadeIn" />
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:SlideTransition Mode="SlideUpFadeIn" />
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition>
    <toolkit:TransitionService.NavigationOutTransition>
        <toolkit:NavigationOutTransition>
            <toolkit:NavigationOutTransition.Backward>
                <toolkit:SlideTransition Mode="SlideDownFadeOut" />
            </toolkit:NavigationOutTransition.Backward>
            <toolkit:NavigationOutTransition.Forward>
                <toolkit:SlideTransition Mode="SlideUpFadeOut" />
            </toolkit:NavigationOutTransition.Forward>
        </toolkit:NavigationOutTransition>
    </toolkit:TransitionService.NavigationOutTransition>


    <phone:PhoneApplicationPage.Resources>

        <!--Region Icons-->
        <Style x:Key="CalendarIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                                    Opacity="{TemplateBinding Opacity}"
                                                    Background="{TemplateBinding Background}">
                            <Path Data="F1 M 18.0025,57.0081L 18.0025,23.0032L 23.0032,23.0032L 23.0032,20.0028C 23.0033,18.898 23.8988,18.0025 25.0035,18.0025L 29.004,18.0025C 30.1087,18.0025 31.0042,18.898 31.0043,20.0026L 31.0043,23.0032L 45.0063,23.0032L 45.0062,20.0026C 45.0062,18.8978 45.9018,18.0023 47.0065,18.0023L 51.0071,18.0023C 52.1118,18.0023 53.0074,18.8978 53.0074,20.0026L 53.0074,23.0032L 58.0081,23.0032L 58.0081,57.0081L 18.0025,57.0081 Z M 21.0029,54.0077L 55.0076,54.0077L 55.0076,31.0044L 21.0029,31.0044L 21.0029,54.0077 Z M 23.0032,47.0066L 29.004,47.0066L 29.004,52.0073L 23.0032,52.0073L 23.0032,47.0066 Z M 31.0043,47.0066L 37.0051,47.0066L 37.0051,52.0073L 31.0043,52.0073L 31.0043,47.0066 Z M 39.0054,47.0066L 45.0062,47.0066L 45.0062,52.0073L 39.0054,52.0073L 39.0054,47.0066 Z M 47.0065,47.0066L 53.0074,47.0066L 53.0074,52.0073L 47.0065,52.0073L 47.0065,47.0066 Z M 23.0032,40.0056L 29.004,40.0056L 29.004,45.0063L 23.0032,45.0063L 23.0032,40.0056 Z M 31.0043,40.0056L 37.0051,40.0056L 37.0051,45.0063L 31.0043,45.0063L 31.0043,40.0056 Z M 39.0054,40.0056L 45.0062,40.0056L 45.0062,45.0063L 39.0054,45.0063L 39.0054,40.0056 Z M 47.0065,40.0056L 53.0074,40.0056L 53.0074,45.0063L 47.0065,45.0063L 47.0065,40.0056 Z M 31.0043,33.0048L 37.0051,33.0048L 37.0051,38.0055L 31.0043,38.0055L 31.0043,33.0048 Z M 39.0054,33.0048L 45.0062,33.0048L 45.0062,38.0055L 39.0054,38.0055L 39.0054,33.0048 Z M 47.0065,33.0048L 53.0074,33.0048L 53.0074,38.0055L 47.0065,38.0055L 47.0065,33.0048 Z M 48.5067,20.0029C 47.6782,20.0029 47.0065,20.6745 47.0065,21.5031L 47.0065,24.5035C 47.0065,25.332 47.6782,26.0037 48.5067,26.0037L 49.5068,26.0037C 50.3354,26.0037 51.0071,25.332 51.0071,24.5035L 51.0071,21.5031C 51.0071,20.6745 50.3354,20.0029 49.5068,20.0029L 48.5067,20.0029 Z M 26.5037,20.0028C 25.6751,20.0028 25.0035,20.6745 25.0035,21.503L 25.0035,24.5035C 25.0035,25.332 25.6751,26.0037 26.5037,26.0037L 27.5038,26.0037C 28.3324,26.0037 29.004,25.332 29.004,24.5035L 29.004,21.503C 29.004,20.6745 28.3324,20.0028 27.5038,20.0028L 26.5037,20.0028 Z M 32.0045,41.0057L 32.0045,44.0061L 36.005,44.0061L 36.005,41.0057L 32.0045,41.0057 Z " 
                                                      Width="40.0056" Height="39.0058" 
                                                      Canvas.Left="5" Canvas.Top="5.5"
                                                      Stretch="Fill" 
                                                      Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ClockIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                                    Opacity="{TemplateBinding Opacity}"
                                                    Background="{TemplateBinding Background}">
                            <Path Data="F1 M367,295.5H227.5V142h45v108.5H367V295.5z M256,95c-88.992,0-161,72.022-161,161c0,88.992,72.023,161,161,161c88.992,0,161-72.023,161-161C417,167.007,344.977,95,256,95 M256,50c113.771,0,206,92.229,206,206s-92.229,206-206,206S50,369.771,50,256S142.229,50,256,50z" 
                                                      Width="38" Height="38" 
                                                      Canvas.Left="6" Canvas.Top="6"
                                                      Stretch="Fill" 
                                                      Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ReminderIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                                    Opacity="{TemplateBinding Opacity}"
                                                    Background="{TemplateBinding Background}">
                            <Path Data="F1 M310.489,117.73c-11.175-6.415-18.095-18.365-18.072-31.25c0-0.021,0-0.042,0-0.063	C292.417,66.304,276.111,50,256,50c-20.113,0-36.417,16.304-36.417,36.417c0,0.021,0,0.042,0,0.064	c0.022,12.901-6.883,24.828-18.072,31.25C120.429,164.271,167.02,318.832,82.3,346.149v36.101h347.4v-36.101	C344.979,318.831,391.571,164.27,310.489,117.73z M256,71.642c8.147,0,14.775,6.627,14.775,14.775	c0,8.147-6.628,14.775-14.775,14.775c-8.147,0-14.775-6.628-14.775-14.775C241.225,78.27,247.853,71.642,256,71.642z M306.167,412.333c0,27.431-22.236,49.667-49.667,49.667c-27.43,0-49.667-22.236-49.667-49.667H306.167z" 
                                                      Width="38" Height="38" 
                                                      Canvas.Left="6" Canvas.Top="6"
                                                      Stretch="Fill" 
                                                      Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="LowPriorityIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                                    Opacity="{TemplateBinding Opacity}"
                                                    Background="{TemplateBinding Background}">
                            <Path Data="F1 M 42,19.0002L 34,19.0002L 34,43.7502L 24,33.7502L 24,44.2502L 38,58.2502L 52,44.2502L 52,33.7502L 42,43.7502L 42,19.0002 Z " 
                                                      Width="28" Height="39.25" 
                                                      Canvas.Left="10.5" Canvas.Top="5.375"
                                                      Stretch="Fill" 
                                                      Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="HighPriorityIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                                    Opacity="{TemplateBinding Opacity}"
                                                    Background="{TemplateBinding Background}">
                            <Path Data="F1 m37.999275,44.509476c-1.797794,0 -3.255135,1.457344 -3.255135,3.255135c0,1.797794 1.45734,3.255131 3.255135,3.255131c1.797653,0 3.255131,-1.457336 3.255131,-3.255131c0,-1.797791 -1.457478,-3.255135 -3.255131,-3.255135zm-3.255135,-19.530794l1.084953,17.36062l4.340225,0l1.085087,-17.36062l-6.510265,0z" 
                                                      Width="8" Height="33.8" 
                                                      Canvas.Left="21" Canvas.Top="8.1"
                                                      Stretch="Fill" 
                                                      Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="TitleIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                                    Opacity="{TemplateBinding Opacity}"
                                                    Background="{TemplateBinding Background}">
                            <Path Data="F1 M 54.6818,20.1053L 55.8947,21.3182C 57.4019,22.8254 57.4019,25.2691 55.8947,26.7763L 53.7721,28.8989L 47.1011,22.2279L 49.2237,20.1053C 50.7309,18.5981 53.1746,18.5981 54.6818,20.1053 Z M 36.1848,46.4862L 29.5138,39.8152L 45.8881,23.4408L 52.5592,30.1119L 36.1848,46.4862 Z M 28.9073,42.241L 33.759,47.0927L 27.0251,48.9749L 28.9073,42.241 Z M 19,57L 19,25L 40.8063,25L 36.8063,29L 23,29L 23,53L 53,53L 53,32.6912L 57,28.6911L 57,57L 19,57 Z " 
                                                      Width="38.0251" Height="38.0251" 
                                                      Canvas.Left="6" Canvas.Top="6"
                                                      Stretch="Fill" 
                                                      Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="DescriptionIcon" TargetType="ContentControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Canvas Width="50" Height="50" 
                                Opacity="{TemplateBinding Opacity}"
                                Background="{TemplateBinding Background}">
                            <Path Data="F1 M 23.75,18.9999L 53.8333,19L 53.8333,57L 23.75,57L 23.75,55.4167C 22.0011,55.4167 20.5833,54.3533 20.5833,53.0417C 20.5833,52.4334 20.8882,51.8785 21.3897,51.4583C 20.8882,51.0382 20.5833,50.4833 20.5833,49.875C 20.5833,49.2667 20.8882,48.7118 21.3897,48.2917C 20.8882,47.8715 20.5833,47.3166 20.5833,46.7083C 20.5833,46.1001 20.8882,45.5452 21.3897,45.125C 20.8882,44.7048 20.5833,44.1499 20.5833,43.5417C 20.5833,42.9334 20.8882,42.3785 21.3897,41.9583C 20.8882,41.5381 20.5833,40.9833 20.5833,40.375C 20.5833,39.7667 20.8882,39.2118 21.3897,38.7917C 20.8882,38.3715 20.5833,37.8166 20.5833,37.2083C 20.5833,36.6 20.8882,36.0452 21.3897,35.625C 20.8882,35.2048 20.5833,34.6499 20.5833,34.0417C 20.5833,33.4334 20.8882,32.8785 21.3897,32.4583C 20.8882,32.0381 20.5833,31.4833 20.5833,30.875C 20.5833,30.2667 20.8882,29.7118 21.3897,29.2917C 20.8882,28.8715 20.5833,28.3166 20.5833,27.7083C 20.5833,27.1001 20.8882,26.5452 21.3897,26.125C 20.8882,25.7048 20.5833,25.1499 20.5833,24.5417C 20.5833,23.23 22.0011,22.1667 23.75,22.1667L 23.75,18.9999 Z M 23.75,23.75C 22.8755,23.75 22.1666,24.1045 22.1666,24.5417C 22.1666,24.9789 22.8755,25.3334 23.75,25.3334C 24.6244,25.3334 25.3333,24.9789 25.3333,24.5417C 25.3333,24.1045 24.6244,23.75 23.75,23.75 Z M 23.75,26.9167C 22.8755,26.9167 22.1666,27.2712 22.1666,27.7084C 22.1666,28.1456 22.8755,28.5 23.75,28.5C 24.6244,28.5 25.3333,28.1456 25.3333,27.7084C 25.3333,27.2712 24.6244,26.9167 23.75,26.9167 Z M 23.75,30.0834C 22.8755,30.0834 22.1666,30.4378 22.1666,30.875C 22.1666,31.3123 22.8755,31.6667 23.75,31.6667C 24.6244,31.6667 25.3333,31.3123 25.3333,30.875C 25.3333,30.4378 24.6244,30.0834 23.75,30.0834 Z M 23.75,33.25C 22.8755,33.25 22.1666,33.6045 22.1666,34.0417C 22.1666,34.4789 22.8755,34.8334 23.75,34.8334C 24.6244,34.8334 25.3333,34.4789 25.3333,34.0417C 25.3333,33.6045 24.6244,33.25 23.75,33.25 Z M 23.75,36.4167C 22.8755,36.4167 22.1666,36.7711 22.1666,37.2084C 22.1666,37.6456 22.8755,38 23.75,38C 24.6244,38 25.3333,37.6456 25.3333,37.2084C 25.3333,36.7711 24.6244,36.4167 23.75,36.4167 Z M 23.75,39.5834C 22.8755,39.5834 22.1667,39.9378 22.1667,40.375C 22.1667,40.8123 22.8755,41.1667 23.75,41.1667C 24.6244,41.1667 25.3333,40.8123 25.3333,40.375C 25.3333,39.9378 24.6244,39.5834 23.75,39.5834 Z M 23.75,42.75C 22.8755,42.75 22.1667,43.1045 22.1667,43.5417C 22.1667,43.9789 22.8755,44.3334 23.75,44.3334C 24.6244,44.3334 25.3333,43.9789 25.3333,43.5417C 25.3333,43.1045 24.6244,42.75 23.75,42.75 Z M 23.75,45.9167C 22.8755,45.9167 22.1667,46.2711 22.1667,46.7083C 22.1667,47.1456 22.8755,47.5 23.75,47.5C 24.6244,47.5 25.3333,47.1456 25.3333,46.7083C 25.3333,46.2711 24.6244,45.9167 23.75,45.9167 Z M 23.75,49.0833C 22.8755,49.0833 22.1667,49.4378 22.1667,49.875C 22.1667,50.3122 22.8755,50.6667 23.75,50.6667C 24.6244,50.6667 25.3333,50.3122 25.3333,49.875C 25.3333,49.4378 24.6244,49.0833 23.75,49.0833 Z M 23.75,52.25C 22.8755,52.25 22.1667,52.6045 22.1667,53.0417C 22.1667,53.4789 22.8755,53.8333 23.75,53.8333C 24.6244,53.8333 25.3333,53.4789 25.3333,53.0417C 25.3333,52.6045 24.6244,52.25 23.75,52.25 Z M 30.0833,25.3333L 30.0833,28.5L 47.5,28.5L 47.5,25.3334L 30.0833,25.3333 Z M 33.25,31.6667L 33.25,33.25L 44.3333,33.25L 44.3333,31.6667L 33.25,31.6667 Z " 
                                  Width="33.25" Height="38.0001" 
                                  Canvas.Left="8.325" Canvas.Top="6"
                                  Stretch="Fill" 
                                  Fill="{TemplateBinding Foreground}"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!--EndRegion-->

        <Style x:Key="ButtonCloseButtonStyle" TargetType="Button">
            <Setter Property="Foreground" Value="{StaticResource ButtonIconBrush}" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="BorderBrush" Value="{StaticResource ButtonIconBrush}" />
            <Setter Property="Opacity" Value="0.8" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border Width="50" Height="50"
                                                    Background="{TemplateBinding Background}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    Opacity="{TemplateBinding Opacity}">
                            <TextBlock FontFamily="Segoe UI Symbol" Text="&#xe17E;&#xe107;" VerticalAlignment="Center" HorizontalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="TextBoxStyle" TargetType="controls:MyTextBox">
            <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilyNormal}"/>
            <Setter Property="FontSize" Value="25.333"/>
            <Setter Property="Foreground" Value="{StaticResource ButtonForegroundBrush}"/>
            <Setter Property="Background" Value="{StaticResource ButtonBackgroundBrush}"/>
            <Setter Property="CaretBrush" Value="{StaticResource TextBoxCaretBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource PhoneAccentBrush}"/>
            <Setter Property="SelectionBackground" Value="{StaticResource PhoneAccentBrush}"/>
            <Setter Property="SelectionForeground" Value="{StaticResource PhoneTextBoxSelectionForegroundBrush}"/>
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="InputScope" Value="Text" />
            <Setter Property="Mask" Value="#00000000" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="controls:MyTextBox">
                        <Grid x:Name="RootGrid" 
                              Background="{TemplateBinding Background}"
                              Width="{TemplateBinding Width}" 
                              Height="{TemplateBinding Height}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="BottomBorder" 
                                                             Storyboard.TargetProperty="Height"
                                                             To="5"
                                                             Duration="0:0:0.2"/>
                                            <DoubleAnimation Storyboard.TargetName="ContentElement" 
                                                             Storyboard.TargetProperty="(ContentControl.Foreground).(SolidColorBrush.Opacity)"
                                                             To="1"
                                                             Duration="0:0:0.2"/>

                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Unfocused">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="BottomBorder" 
                                                             Storyboard.TargetProperty="Height"
                                                             To="0"
                                                             Duration="0:0:0.2"/>
                                            <DoubleAnimation Storyboard.TargetName="ContentElement" 
                                                             Storyboard.TargetProperty="(ContentControl.Foreground).(SolidColorBrush.Opacity)"
                                                             To="0.6"
                                                             Duration="0:0:0.2"/>

                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="HintBorder" Background="{TemplateBinding Mask}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*" MinHeight="55" />
                                        <RowDefinition Height="5" />
                                    </Grid.RowDefinitions>
                                    <Border x:Name="IconBorder"
                                            Width="70">
                                        <ContentControl x:Name="Icon"
                                                        Content="{TemplateBinding Icon}" 
                                                        VerticalAlignment="Top"
                                                        Margin="0,5,0,0" />
                                    </Border>
                                    <ContentControl x:Name="HintContent" 
                                                    Grid.Column="1"
                                                    Content="{TemplateBinding Hint}"
                                                    Visibility="{TemplateBinding ActualHintVisibility}"
                                                    Foreground="{StaticResource ButtonForegroundBrush}" 
                                                    Opacity="0.5"
                                                    BorderThickness="0" 
                                                    HorizontalContentAlignment="Stretch" 
                                                    Margin="5,12,5,8"
                                                    Padding="{TemplateBinding Padding}"
                                                    VerticalContentAlignment="Stretch"/>
                                    <ContentControl x:Name="ContentElement" 
                                                    Grid.Column="1"
                                                    Foreground="{TemplateBinding Foreground}" 
                                                    BorderThickness="0" 
                                                    HorizontalContentAlignment="Stretch" 
                                                    Margin="5,12,5,8"
                                                    Padding="{TemplateBinding Padding}"
                                                    VerticalContentAlignment="Stretch"/>
                                    <Border Grid.Row="1" Grid.ColumnSpan="2" 
                                            Background="Transparent">
                                        <Border x:Name="BottomBorder" 
                                                VerticalAlignment="Bottom"
                                                Height="5"
                                                Background="{TemplateBinding BorderBrush}" />
                                    </Border>
                                </Grid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <Storyboard x:Name="ShowDueStoryboard">
            <ColorAnimation Storyboard.TargetName="DueDatePicker" 
                            Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)"
                            To="{StaticResource PhoneAccentColor}"
                            Duration="0:0:0.4"/>

            <DoubleAnimation Storyboard.TargetName="DueGrid" 
                             Storyboard.TargetProperty="Height"
                             To="180"
                             Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="DueTimePicker" 
                             Storyboard.TargetProperty="Opacity"
                             To="1"
                             Duration="0:0:0.3"
                             BeginTime="0:0:0.15"/>
            <DoubleAnimation Storyboard.TargetName="ReminderPicker" 
                             Storyboard.TargetProperty="Opacity"
                             To="1"
                             Duration="0:0:0.3"
                             BeginTime="0:0:0.3"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DueTimePicker"
                                           Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ReminderPicker"
                                           Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Name="HideDueStoryboard">
            <ColorAnimation Storyboard.TargetName="DueDatePicker" 
                            Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)"
                            To="{StaticResource ButtonBackgroundColor}"
                            Duration="0:0:0.3"
                            BeginTime="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetName="DueGrid" 
                             Storyboard.TargetProperty="Height"
                             To="60"
                             Duration="0:0:0.7"
                             BeginTime="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="DueTimePicker" 
                             Storyboard.TargetProperty="Opacity"
                             To="0"
                             Duration="0:0:0.3"
                             BeginTime="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="ReminderPicker" 
                             Storyboard.TargetProperty="Opacity"
                             To="0"
                             Duration="0:0:0.3"/>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DueTimePicker"
                                           Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ReminderPicker"
                                           Storyboard.TargetProperty="IsEnabled">
                <DiscreteObjectKeyFrame KeyTime="0" Value="False" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </phone:PhoneApplicationPage.Resources>


    <Grid x:Name="LayoutRoot" Background="#0C0C0C">
        <!--Background="{StaticResource ApplicationBackgroundBrush}">-->

        <ScrollViewer>


            <!--ContentPanel - place additional content here-->
            <Grid x:Name="ContentPanel" Margin="30,40,30,0">
                <StackPanel>
                    <!--Text-->
                    <StackPanel Margin="0,0,0,20">
                        <!--Název-->
                        <controls:MyTextBox x:Name="TitleTextBox"
                                            KeyDown="TitleTextBox_KeyDown" 
                                            GotFocus="TitleTextBox_GotFocus" 
                                            LostFocus="TitleTextBox_LostFocus"
                                            Style="{StaticResource TextBoxStyle}"
                                            Text="{Binding Title, Mode=TwoWay}"
                                            Hint="{Binding LocalizedResources.Title, Source={StaticResource LocalizedStrings}}">
                            <controls:MyTextBox.Resources>
                                <Storyboard x:Name="TitleTextBoxNoTextStoryboard">
                                    <DoubleAnimation Storyboard.TargetName="TitleTextBox"
                                                        Storyboard.TargetProperty="Opacity"
                                                        From="1.0"
                                                        To="0.35"
                                                        AutoReverse="True"
                                                        RepeatBehavior="Forever"
                                                        BeginTime="0:0:0.5"
                                                        Duration="0:0:0.5" >
                                        <DoubleAnimation.EasingFunction>
                                            <PowerEase EasingMode="EaseInOut"/>
                                        </DoubleAnimation.EasingFunction>
                                    </DoubleAnimation>
                                </Storyboard>
                            </controls:MyTextBox.Resources>
                            <controls:MyTextBox.Icon>
                                <ContentControl Style="{StaticResource TitleIcon}" Foreground="{StaticResource ButtonIconBrush}" />
                            </controls:MyTextBox.Icon>
                        </controls:MyTextBox>

                        <!--Detail-->
                        <controls:MyTextBox x:Name="DetailTextBox"
                                            GotFocus="DetailTextBox_GotFocus" 
                                            LostFocus="DetailTextBox_LostFocus"
                                            Style="{StaticResource TextBoxStyle}"
                                            AcceptsReturn="True"
                                            Mask="#2A000000"
                                            Text="{Binding Detail, Mode=TwoWay}"
                                            Hint="{Binding LocalizedResources.Detail, Source={StaticResource LocalizedStrings}}">
                            <controls:MyTextBox.Icon>
                                <ContentControl Style="{StaticResource DescriptionIcon}" Foreground="{StaticResource ButtonIconBrush}" />
                            </controls:MyTextBox.Icon>
                        </controls:MyTextBox>
                    </StackPanel>

                    <!--Termín & Připomenutí-->
                    <Grid x:Name="DueGrid" Margin="0,0,0,20" Height="180">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60" />
                            <RowDefinition Height="60" />
                            <RowDefinition Height="60" />
                        </Grid.RowDefinitions>

                        <!--Datum-->
                        <Button x:Name="DueDatePicker" Grid.Row="0" Tap="DueDatePicker_Tap">
                            <Button.Background>
                                <SolidColorBrush x:Name="DueDatePickerBackground" Color="{StaticResource PhoneAccentColor}" />
                            </Button.Background>
                            <Button.Template>
                                <ControlTemplate>
                                    <Grid Background="{TemplateBinding Background}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <ContentControl Style="{StaticResource CalendarIcon}" Foreground="{StaticResource ButtonIconBrush}"/>
                                        <TextBlock Grid.Column="1" Text="{Binding DueDate, StringFormat='d'}" Style="{StaticResource ButtonTextStyle}" />
                                        <Button Grid.ColumnSpan="2" Style="{StaticResource ButtonCloseButtonStyle}" HorizontalAlignment="Right" Margin="5" />
                                    </Grid>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!--Čas-->
                        <Button x:Name="DueTimePicker" Grid.Row="1" Tap="DueTimePicker_Tap">
                            <Button.Template>
                                <ControlTemplate>
                                    <Border Background="{StaticResource PhoneAccentBrush}">
                                        <Grid Background="#22000000">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="70" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <ContentControl Style="{StaticResource ClockIcon}" Foreground="{StaticResource ButtonIconBrush}"/>
                                            <TextBlock Grid.Column="1" Text="{Binding DueDate, Mode=OneWay, Converter={StaticResource TimeToStringConverter}}" Style="{StaticResource ButtonTextStyle}" />
                                        </Grid>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!--Připomenutí-->
                        <ToggleButton x:Name="ReminderPicker" Grid.Row="2">
                            <ToggleButton.Template>
                                <ControlTemplate>
                                    <Border Background="{StaticResource PhoneAccentBrush}">
                                        <Grid Background="#33000000">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="70" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <ContentControl Style="{StaticResource ReminderIcon}" Foreground="{StaticResource ButtonIconBrush}"/>
                                            <TextBlock Grid.Column="1" Text="15 minutes" Style="{StaticResource ButtonTextStyle}" />
                                            <Button Grid.ColumnSpan="2" Style="{StaticResource ButtonCloseButtonStyle}" HorizontalAlignment="Right" Margin="5" />
                                        </Grid>
                                    </Border>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                    </Grid>

                    <!--Priorita-->
                    <ToggleButton x:Name="PriorityButton"
                                  Margin="0,0,0,20"
                                  IsThreeState="True"
                                  IsChecked="{Binding Priority, Mode=TwoWay, Converter={StaticResource TaskPriorityToBooleanConverter}}">
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <Grid Height="60">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CheckStates">
                                            <VisualState x:Name="Unchecked">
                                                <Storyboard>
                                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                                    Storyboard.TargetProperty="Color"
                                                                    To="{StaticResource PhoneAccentColor}"
                                                                    Duration="0:0:0.4"/>
                                                    <DoubleAnimation Storyboard.TargetName="HighPriorityGrid" 
                                                                     Storyboard.TargetProperty="Opacity"
                                                                     To="1"
                                                                     Duration="0:0:0.4" />
                                                    <DoubleAnimation Storyboard.TargetName="NormalPriorityGrid" 
                                                                     Storyboard.TargetProperty="Opacity"
                                                                     To="0"
                                                                     Duration="0:0:0.4" />
                                                    <DoubleAnimation Storyboard.TargetName="LowPriorityGrid" 
                                                                     Storyboard.TargetProperty="Opacity"
                                                                     To="0"
                                                                     Duration="0:0:0.4" />
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Indeterminate">
                                                <Storyboard>
                                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                                    Storyboard.TargetProperty="Color"
                                                                    To="{StaticResource ButtonBackgroundColor}"
                                                                    Duration="0:0:0.4"/>
                                                    <DoubleAnimation Storyboard.TargetName="HighPriorityGrid" 
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    To="0"
                                                                    Duration="0:0:0.4" />
                                                    <DoubleAnimation Storyboard.TargetName="NormalPriorityGrid" 
                                                                        Storyboard.TargetProperty="Opacity"
                                                                        To="1"
                                                                        Duration="0:0:0.4" />
                                                    <DoubleAnimation Storyboard.TargetName="LowPriorityGrid" 
                                                                        Storyboard.TargetProperty="Opacity"
                                                                        To="0"
                                                                        Duration="0:0:0.4" />
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Checked">
                                                <Storyboard>
                                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                                    Storyboard.TargetProperty="Color"
                                                                    To="{StaticResource ButtonBackgroundColor}"
                                                                    Duration="0:0:0.4"/>
                                                    <DoubleAnimation Storyboard.TargetName="HighPriorityGrid" 
                                                                        Storyboard.TargetProperty="Opacity"
                                                                        To="0"
                                                                        Duration="0:0:0.4" />
                                                    <DoubleAnimation Storyboard.TargetName="NormalPriorityGrid" 
                                                                        Storyboard.TargetProperty="Opacity"
                                                                        To="0"
                                                                        Duration="0:0:0.4" />
                                                    <DoubleAnimation Storyboard.TargetName="LowPriorityGrid" 
                                                                        Storyboard.TargetProperty="Opacity"
                                                                        To="1"
                                                                        Duration="0:0:0.4" />
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <Grid.Background>
                                        <SolidColorBrush x:Name="BackgroundColor" Color="{StaticResource ButtonBackgroundColor}"/>
                                    </Grid.Background>
                                    <Grid x:Name="LowPriorityGrid" Opacity="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>

                                        <ContentControl Style="{StaticResource LowPriorityIcon}" Foreground="{StaticResource ButtonIconBrush}" />
                                        <TextBlock Grid.Column="1" Text="{Binding LocalizedResources.PriorityLow, Source={StaticResource LocalizedStrings}}" Style="{StaticResource ButtonTextStyle}" />
                                    </Grid>
                                    <Grid x:Name="NormalPriorityGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="1" Text="{Binding LocalizedResources.PriorityNormal, Source={StaticResource LocalizedStrings}}" Style="{StaticResource ButtonTextStyle}" />
                                    </Grid>
                                    <Grid x:Name="HighPriorityGrid" Opacity="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <ContentControl Style="{StaticResource HighPriorityIcon}" Foreground="{StaticResource ButtonIconBrush}" />
                                        <TextBlock Grid.Column="1" Text="{Binding LocalizedResources.PriorityHigh, Source={StaticResource LocalizedStrings}}" Style="{StaticResource ButtonTextStyle}" />
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <Rectangle x:Name="PageOverlay"
                   Fill="Black"
                   Opacity="0.4"
                   Visibility="Collapsed">
            <Rectangle.Resources>
                <Storyboard x:Name="PageOverlayTransitionHide">
                    <DoubleAnimation Storyboard.TargetName="PageOverlay"
                                     Storyboard.TargetProperty="Opacity"
                                     Duration="0:0:0.3"
                                     To="0">
                    </DoubleAnimation>
                </Storyboard>
            </Rectangle.Resources>
        </Rectangle>
    </Grid>

</phone:PhoneApplicationPage>